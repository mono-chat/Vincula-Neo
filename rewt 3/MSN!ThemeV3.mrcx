;/---------------------------------------\
;               MSN!Theme V3
;                 by Sky
;
;\---------------------------------------/


menu menubar {
  MSN Theme
  .Whispers
  .. $+ $iif($readini(MSNTheme.ini,Whispers,Status) == Internal,$style(1),$null) $+ Internal:{ writeini MSNTheme.ini Whispers Status Internal }
  .. $+ $iif($readini(MSNTheme.ini,Whispers,Status) == External,$style(1),$null) $+ External:{ writeini MSNTheme.ini Whispers Status External }
  .. $+ $iif($readini(MSNTheme.ini,Whispers,Status) == Disabled,$style(1),$null) $+ Off:{ writeini MSNTheme.ini Whispers Status Disabled }
  . $+ $iif($group(#checkprofile) == on,Internal,External) $+ : $+ { $iif($group(#checkprofile) == on,.disable #checkprofile,.enable #checkprofile) }
}

#MSNThemeV2 on




;raw 317:*:{ msg $active $2 has been connected for $duration($calc($ctime - $4)) }

;/---------------------------------------\
;                MSN!Theme
;                 Events
;
;\---------------------------------------/






;Whisper Events

raw WHISPER:*:{
  if ($3- == ERR NOUSERWHISPER) { halt }
  if ($dialog(Whisper $+ $nick)) { 
    if ($dialog(Whisper $+ $nick).active == $false) { echo -a 6 $+ $msnactionspace(TOPIC) You have received a whisper from 1 $+ $nick }
    did -a Whisper $+ $nick 1 $utf8($nick) : $iif($3 != S,$3-,$left($5-,-1)) $+ $crlf
  }
  elseif ($readini(MSNTheme.ini,Whispers,Status) == External) {
    echo $$1  $+ $getcolour($mylevel($nick,$$1)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(PRIVMSG) 2 $+ $utf8($nick) 6whispers to1 $utf8($me) $+ 1  : $iif($3 != S,$3-,$left($5-,-1))
  }
  elseif ($readini(MSNTheme.ini,Whispers,Status) == Internal) {
    initiatewhisper $nick $$1
    did -a Whisper $+ $nick 1 $utf8($nick) : $iif($3 != S,$3-,$left($5-,-1)) $+ $crlf
  }
  if ($readini(MSNTheme.ini,Whispers,Status) == Disabled) {
    .raw whisper $$1 $nick :ERR NOUSERWHISPER
    halt
  }
  halt
}


;PRIVMSG Event's

on ^*:TEXT:*:#:{
  if ($1 == [M|SF|T-MP3]...) { 
    inc -u3 %mp3
    if (%mp3 < 3) { 
      ;      msg # (8) $lower($gettok($gettok($2-,2,40),1,41)) (8) 
    }
  }
  haltdef
}

on ^*:TEXT:*:?:{
  echo $nick  $+ $getcolour($mylevel($nick,$nick)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(PRIVMSG) $getcolour(PRIVMSG) $+ $utf8($nick) 1: $1- 
  haltdef
}

alias is_utf8 {
  var %i = 1, %o
  while (%i <= $len($1-)) {
    var %d = $asc($mid($1-,%i,1))
    if ((%d >= 192) && (%d <= 199)) { %o = 1 }
    elseif ((%d >= 224) && (%d <= 231)) { %o = 1 }
    inc %i
  }
  return %o
}

on *:SIGNAL:PRIVMSG:{
  var %nick = $iif($isutf($1) > 1,$utfdecode($1),$1)
  if ($left($1,2) == $chr(37) $+ $chr(35)) { .echo $2  3  $remove($3-,) }
  elseif ($2 == $me) halt
  else {
    var %ctok = $numtok($1-,3)
    if ($me ison $2) {
      if (%ctok <= 75) {
        echo $2  $+ $getcolour($mylevel($1,$2)) $+ › $+ $getgender($1) $+ ‹ $msnactionspace(PRIVMSG) $getcolour(PRIVMSG) $+ %nick 1: $3- 
      }
      else {
        echo $2  $+ $getcolour($mylevel($1,$2)) $+ › $+ $getgender($1) $+ ‹ $msnactionspace(PRIVMSG) $getcolour(PRIVMSG) $+ %nick 1: $strip($3-)
      }
    }
  }
}

on ^*:ACTION:*:#:{
  sendaction # $nick $1-
  haltdef
}

on *:CTCPREPLY:*:{
  var %time
  if ($1 == PING) { %time = $calc($gettok($time,3,58) - $gettok($time($2),3,58)) }
  if ($nick ison $active) {
    echo -a        14<- $upper($mid($1,1,1)) $+ $lower($mid($1,2,$len($1))) Ctcp reply from $nick ( $+ $iif($1 == PING,%time Sec,$2-) $+ )
  }
  else {
    echo $comchan($nick,1)        14<- $upper($mid($1,1,1)) $+ $lower($mid($1,2,$len($1))) Ctcp reply from $nick ( $+ $iif($1 == PING,%time Sec,$2-) $+ )
  }
  halt
}

;Channel Events

on ^*:PART:#:{
  if ($gettok(%quit. [ $+ [ $ial($nick) ] ],1,32) == #) {
    echo # $getcolour(quit) $+ $msnactionspace(part) $utf8($nick) Has quit the conversation. ( $+ $gettok(%quit. [ $+ [ $ial($nick) ] ],2-,32) $+ )
    haltdef
  }
  else {
    inc -u2 %part. [ $+ [ # ] ]
    if (%part. [ $+ [ # ] ] <= 7) {
      echo # $getcolour(part) $+ $msnactionspace(part) $utf8($nick) Has left the conversation.
      haltdef
    }
    elseif (%part. [ $+ [ # ] ] > 7) {
      haltdef
    }
  }
}

on ^*:JOIN:#:{
  inc -u2 %join. [ $+ [ # ] ]
  if (%join. [ $+ [ # ] ] <= 7) {
    echo # $getcolour(join) $+ $msnactionspace(join) $utf8($nick) Has joined the conversation.
    haltdef
  }
  elseif (%join. [ $+ [ # ] ] > 7) {
    haltdef
  }
  if ($nick == $me) && (%timeticks. [ $+ [ # ] ]) { echo # Join speed %timeticks. [ $+ [ # ] ] seconds. }
}

;Input Events

on *:INPUT:#:{ 
  if ($left($1,1) == + || $left($1,1) == -) && ($len($1-) == 2) && ($me isop # || $me isowner #) {
    mode # $1
    halt
  }
  elseif ($left($1,1) != /) { 
    ;msg # $upper($left($1,1)) $+ $mid($1-,2) $+ .
    msg # $1-
    ;msg # $replace($1-,au,ua,ou,uo,ti,it,li,il,as,sa,re,er,co,oc,me,em,at,ta,ra,ar,ip,pi,ow,wo,so,os,ve,ev,ui,iu,an,na,wi,iw,oi,io,in,ni,th,ht,is,si,oo,ooo,er,re,de,ed,uc,cu,ig,gi,ht,th,oe,eo,nt,tn,al,la,he,eh,ar,re)
    ;var %i = $len($1-), %o
    ;while (%i >= 1) { 
    ;  %o = %o $+ $mid($1-,%i,1) $+ $chr(32)
    ;  dec %i
    ;}
    ;msg # %o
    haltdef
  }
}

on *:INPUT:?:{ 
  if ($mid($1,1,1) != /) { 
    .msg $active $1-
    haltdef
  }
}

;Mode

on ^*:rawMODE:#:{
  if (!$2) {
    if ($len($1) == 2) {
      echo #  $+ $getcolour($mylevel($nick,#)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(USERMODE) $getcolour(MODE) $utf8($nick) Has set mode $1
    }
    else {
      echo #  $+ $getcolour($mylevel($nick,#)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(USERMODE) $getcolour(MODE) $utf8($nick) Has set modes $1
    }
  }
  elseif ($1 == +l) || ($1 == +k) || ($1 == -k)  {
    echo #  $+ $getcolour($mylevel($nick,#)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(USERMODE) $getcolour(MODE) $utf8($nick) Has set modes $1-
  }
  elseif ($2) {
    var %level
    var %vows = a,e,i,o,u
    var %i = 1
    if ($1 == +q) { %level = Owner. }
    elseif ($1 == -q) { %level = Participant. }
    elseif ($1 == +o) { %level = Host. }
    elseif ($1 == -o) { %level = Participant. }
    elseif ($1 == -v) { %level = Spectator. }
    elseif ($1 == +v) { %level = Speaker. }
    elseif ($1 == +N) { %level = Non-Subscriber. }
    else halt
    var %end = a
    while (%i <= $numtok(%vows,44)) {
      if ($gettok(%vows,%i,44) == $lower($mid(%level,1,1))) { %end = an }
      inc %i
    }
    echo #  $+ $getcolour($mylevel($nick,#)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(USERMODE) $getcolour(MODE) $utf8($nick) Has made $utf8($2) %end %level
  }
  haltdef
}

;Kick

on ^*:KICK:#:{
  if (%kill. [ $+ [ $ial($nick) ] ] == #) { 
    echo #  $+ $getcolour($mylevel($nick,#)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(KICK) $getcolour(KICK) $utf8($nick) Has killed $utf8($knick) out of the chatroom. ( $+ $1- $+ )
    set -u2 %noclose. [ $+ [ # ] ] true
  }
  else {
    echo #  $+ $getcolour($mylevel($nick,#)) $+ › $+ $getgender($nick) $+ ‹ $msnactionspace(KICK) $getcolour(KICK) $utf8($nick) Has kicked $utf8($knick) out of the chatroom. ( $+ $1- $+ 4,0)
  }
  haltdef
}

;Topic

raw 332:*:{
  echo $2 $msnactionspace(TOPIC) 10The chat's topic is:1 $3-
  halt 
}

on ^*:TOPIC:#:{
  .echo # $msnactionspace(TOPIC) 10The chat's topic has changed to: 1 $1- 1( $+ $utf8($nick) $+ )
  halt
}

;Props

raw prop:*:{
  if ($2 != ownerkey) && ($2 != hostkey) {
    .echo $1 $msnactionspace(TOPIC) 14 $+ $nick Has propped the $lower($2) to1 $3-
  }
  halt
}




;/---------------------------------------\
;                MSN!Theme
;                  Raws
;
;\---------------------------------------/






raw 405:*:{ echo $2 2 $+ $msnactionspace(RAW) $+ Socket can only handle one channel. | halt }
raw 914:*:{ halt }
raw knock:*:{
  var %reason
  if ($2 == 913) { %reason = Access Denied. }
  elseif ($2 == 473) { %reason = Invite Only. }
  echo $1 6 $+ $msnactionspace(KNOCK) $utf8($nick) is knocking ( $+ %reason $+ )
  halt
}

;Away Raws

raw 822:*:{
  echo $1 $msnactionspace(AWAY) 14 $+ $utf8($nick) is away. ( $+ $2- $+ )
  halt
}

raw 821:*:{
  echo $1 $msnactionspace(AWAY) 14 $+ $utf8($nick) has returned.
  halt
}

raw 306:*:{ if ($me ison $2) { echo $2 $msnactionspace(AWAY) 14 $+ You have been marked as being away. } | halt }
raw 305:*:{ if ($me ison $2) { echo $2 $msnactionspace(AWAY) 14 $+ You are no longer marked as being away. } | halt }






;/---------------------------------------\
;                MSN!Theme
;                  Alias
;
;\---------------------------------------/






;MSN Theme Alias

;Whisper Alias's

alias whisper {
  if ($me ison $active) {
    var %i = 1, %whis = $numtok($snicks,44)
    if (%whis == 0) { %whis = 1 }
    while (%i <= %whis) {
      echo $active  $+ $getcolour($mylevel($me,$active)) $+ › $+ $getgender($me) $+ ‹ $msnactionspace(PRIVMSG) 2 $+ $utf8($me) 6whispers to1 $utf8($gettok($snicks,%i,44)) $+ 1  : $1-
      .raw whisper $active $gettok($snicks,%i,44) : $+ $1-
      inc %i
    }
    halt
  }
}

;PRIVMSG Alias's

alias check {
  if ($1) { 
    .ctcp $1 TIME
    .ctcp $1 PING
    .ctcp $1 VERSION
    .ctcp $1 FINGER
    .ctcp $1 ISITVINCULA
  }
  elseif (!$1) {
    .ctcp $snicks TIME
    .ctcp $snicks PING
    .ctcp $snicks VERSION
    .ctcp $snicks FINGER
    .ctcp $snicks ISITVINCULA
  }
}

alias sendaction {
  if ($me ison $1) { 
    echo $1        6 $utf8($2)  $+ $3-
    if ($2 == $me) { .raw privmsg $1 : $+ $chr(1) $+ ACTION $3- $+ $chr(1) }
    halt
  }
}

alias me { sendaction $active $me $$1- }
alias action { sendaction $active $me $$1- }

alias msg {
  if ($2) {
    echo $$1  $+ $getcolour($mylevel($me,$$1)) $+ › $+ $getgender($me) $+ ‹ $msnactionspace(PRIVMSG) $getcolour(PRIVMSG) $+ 2 $+ $utf8($me) 1: $replace($2-,	,     )
    .msg $$1 $2-
  }
}

;Theme Alias

alias mylevel {
  if (!$2) {
    var %level
    if ($nick isowner $$1) { %level = OWNER }
    elseif ($nick !isowner $$1) && ($nick isop $$1) && ($nick !isreg $$1) { %level = HOST }
    elseif ($nick !isowner $$1) && ($nick !isop $$1) && ($nick isreg $$1) { %level = PARTICIPANT }
    else { %level = PARTICIPANT }
    return %level
  }
  elseif ($2) {
    var %level
    if ($$1 isowner $$2) { %level = OWNER }
    elseif ($$1 !isowner $$2) && ($$1 isop $$2) && ($$1 !isreg $$2) { %level = HOST }
    elseif ($$1 !isowner $$2) && ($$1 !isop $$2) && ($$1 isreg $$2) { %level = PARTICIPANT }
    else { %level = PARTICIPANT }
    return %level
  }
}

alias msnactionspace {
  if ($1 == JOIN) { return $str( ,8) }
  if ($1 == PART) { return $str( ,8) }
  if ($1 == TOPIC) { return $str( ,4) }
  if ($1 == RAW) { return $str( ,4) }
  if ($1 == PRIVMSG) { return $str( ,16) }
  if ($1 == USERMODE) { return $str( ,10) }
  if ($1 == AWAY) { return $str( ,6) }
  if ($1 == KICK) { return $str( ,10) }
  if ($1 == KNOCK) { return $str( ,6) }
  if ($1 == ME) { return $str( ,6) }
}

alias getcolour {
  if ($1 == JOIN) { return 14 }
  if ($1 == PART) { return 14 }
  if ($1 == QUIT) { return 2 }
  if ($1 == PRIVMSG) { return 14 }
  if ($1 == MODE) { return 14 }
  if ($1 == KICK) { return 4 }
  if ($1 == PARTICIPANT) { return 12 }
  if ($1 == HOST) { return 5 }
  if ($1 == OWNER) { return 8 }
  if ($1 == MALE) { return 2 }
  if ($1 == FEMALE) { return 6 }
  if ($1 == NEITHER) { return 10 }
}

alias getgender {
  if ($hget(GENDER,$$1) != $null) {
    return $getcolour($hget(GENDER,$$1))
  }
  else return $getcolour(NEITHER)
}

alias utf8 {
  var %r, %l 1
  %r = $replace($1-,ï‚,B,ï‚ ,-,ï€>,-,ï€‹,-,ï€,-,ï…,E,ïƒ,C,ï,A,ï’,R,ï‹,K,ï¹,y,ïº˜,i,ïº‰,s,ï¬³,t,ï¬¸,u,ï»‰,e,ï«,k,ï†,F,ïµ,u,ï§,g,Î§,X,ï€¾,>,ï€¥,$chr(37),ï€¸,8,ï¤,d,ï­,m,ï¨,h,ï»›,s,ï‡,G,ï,M,ï¬,l,ï³,s,ïŸ,_,ï”,T,ï²,r,ï¡,a,ï®,n,ï£,c,ï¥,e,ï,N,ï¡,a,ï´,t,ï©,i,ï¯,o,ï®,n,ï¦,f,ï·,w,ïœ,\,ï¼,|,ï€,@,ï,P,ï„,D,ï€§,',ï€ , ,ï€¨,$chr(40),ï€©,$chr(41),ï€ª,*,ï€º,:,ï›,[,ï,],ï°,p,ï€®,.)
  %r = $replace(%r,Ï‡,X,Å†,n,Î©,n,»·,y,Ñ€,p,Ğ ,P,Å™,r,Ñ…,x,Ä®,I,Ä»,L,Ğ¤,o,Äˆ,C,Å,o,Å©,u,Å„,n,Ä¢,G,Å•,r,Å›,s,Ä·,k,Å–,R,×–,i,Îµ,e,×§,r,Ñ›,h,Ğ¼,m,ØŒ,·,Ä«,i,â€˜,‘,â€™,’,Û±,',Ä“,e,Â¢,¢,ï“,S,â€¢,•,ï,O,ï‰,I,Î†,A,ÑŠ,b,ŠÏ,T,Î¦,o,Ğ‚,b,Ñ,r,Ğ,E,Ğ´,A,Ğš,K,Ä,D,Ğ¸,n,Î¸,o,Ğœ,M,Ğ‡,I,Ğ¢,T,Ğ„,e,Çº,A,Ã¶,ö,Ã¤,ä,â€“,–,Â·,·,Ã–,Ö,Ãœ,Ü,Ã‹,Ë,Ñ•,s,Ä…,a,Ä­,i,Ğ¹,n,Ğ²,b,Ğ¾,o,Ñˆ,w,Ä,G,Ä‘,d,Ğ·,e,Å¦,T,Î±,a,ÄŸ,g,Ãº,ú,Å”,R,Ä„,A,Ä‡,c,Ä,Ğ,Îš,K,Ñ,y,Âµ,µ,Ã,Í,â€¹,‹,Â¦,¦,Ã•,Õ,Ã™,Ù,Ã€,À,Î ,N,Ò“,f,Î°,u,Ä¿,L,Å,o,Ï‚,c,Ä‹,c,Ä§,h,Ä¯,i,Å§,t,Î–,Z,Ã,Ş,Ã¾,ş,Ã§,ç,Ã¡,á,Â¾,¾,Å¾,,Ã‡,Ç,Â $+ $chr(173),-,Ã,Á,â€¦,…,Â¨,¨,Ã½,ı,Ë‰,¯,â€,”,Ã›,Û,Ã¬,ì,Ï,p,Î­,e,Ğ³,r,Ã ,à,Ãˆ,È,Â¼,¼,Äµ,j,Ã£,ã,Ä™,e,ÅŸ,s,Âº,º,Ã‘,Ñ,Ã£,ã,Ã†,Æ,Ëš,°,Ğ¯,R,Ëœ,˜,Ã,Î,ÃŠ,Ê,Ã,İ,Ã,Ï,Ã‰,É,â€¡,‡,ÃŒ,Ì,Âª,ª,Ã³,ó,â„¢,™,Ã’,Ò,Ã­,í,Â¿,¿,Ã„,Ä,Â¶,¶,Ã¼,ü,Æ’,ƒ,Ã°,ğ,Ã²,ò,Ãµ,õ,Â¡,¡,Ã©,é,ÃŸ,ß,Â¤,¤,Ã—,×,Ã´,ô,Å ,Š,Ã¸,ø,â€º,›,Ã¢,â,Ã®,î,â‚¬,€,Å¡,š,Ã¯,ï,Ã¿,ÿ,Åƒ,N,Â©,©,Â®,®,Ã»,û,â€ ,†,Â°,°,Â§,§,Â±,±,Â²,²,Ã¨,è)
  %r = $replace(%r,Å‡,N,Û°,·,Ä´,J,Ğ†,I,Î£,E,Î¹,i,Å,O,Î´,o,×¥,y,Î½,v,×¢,y,×,n,Å½,,Å‘,o,ÄŒ,C,Ä—,e,â‚¤,L,ÅŒ,O,Î¬,a,Ä ,G,â„¦,O,Ğ,H,á»ƒ,e,áºµ,a,Ğ–,K,á»,e,áº¿,e,á»—,o,Å«,u,â‚£,F,âˆ†,a,áº®,A,á»§,u,Ä¶,K,Å¤,T,Å,S,Î˜,O,Ğ¨,W,Î’,B,ĞŸ,N,áº…,w,ï»¨,i,ï¯¼,s,ÑŸ,u,Ñ’,h,Â¹,¹,á»²,Y,Î»,a,Ğ¡,C,Ğ $+ $chr(173),E,Å°,U,Äª,I,Ä,c,Ä”,E,Åœ,S,á»Š,I,Ä,g,Å€,l,Ñ—,i,Ù­,*,Å‰,n,Ä¦,H,Ğ”,A,Îœ,M,Ñ‘,e,Ğ¦,U,Ñ,e,â€œ,“,Ñ„,o,Ñƒ,y,Ñ,c,Ğº,k,Ã…,Å,Æ¤,P,â„,R,ï “,I,É³,n,Ê—,c,â–«,·,Ñ“,r,á»‡,e,áº¯,a,áº³,a,Å¯,u,Ä½,L,Æ°,u,Î‡,·,Ë™,',Î·,n,â„“,l,Â,,Â,,Â,,×€,i,Ä¡,g,Å´,W,Î”,A,ï®Š,J,Î¼,µ,Å¸,Ÿ,Ä¥,h,Î²,ß,Ğ¬,b,Å³,u,Ñ”,e,Ï‰,w,ÄŠ,C,Ñ–,i,Å‚,l,Ç¿,o,âˆ«,s,Å¼,z,Å£,t,Ã¦,æ,â‰ˆ,=,Å,L,Å‹,n,Ú¯,S,Ä,d,Ïˆ,w,Ïƒ,o,Ä£,g,Î‰,H,Î,i,Ò‘,r,Îº,k,ÅŠ,N,œ,\,ï€¯,/,Â¬,¬,Ñ‰,w,Û•,o,×,o,Â³,³,Â½,½,Ä°,I,Ä¾,l,Ä•,e,Å¢,T,Å,s,Å·,y,Ä¾,l,Ä©,i,Ã”,Ô,Åš,S,Ä¹,L,Ğ°,a,Ğµ,e,Î¡,P,Ğˆ,J,Î,N,Ç»,a,Ñ’,h,Î®,n,Î¯,l,Å’,Œ,Â¯,¯,Ä,a,Åµ,w,Ã‚,Â,Ãƒ,Ã,Ğ½,H,Ë‡,',Â¸,¸,Ì£,$chr(44),Ø·,b,Ã“,Ó,Ğ™,N,Â«,«,Ã¹,ù,Ã˜,Ø,Ãª,ê)
  %r = $replace(%r,Ø§,I,Ğ»,n,Ñ‹,bl,Ğ±,6,×©,w,â€•,-,Îª,I,ï ,`,Å­,u,á»•,o,Ç¾,Ø,áº«,a,áº§,a,ï±,q,áº‚,W,Ä¤,H,á»,o,âˆ’,-,ï,^,à¸¥,a,Äœ,G,ïº¯,j,Ù‰,s,Ğƒ,r,á»©,u,â—,·,Ï,u,ï€°,0,ï€·,7,ï€¢,",Ó©,O,Ç,i,Ç‘,O,Æ ,O,ï€²,2,Ò¯,y,ï¶,v,Ğ,A,â‰¤,<,â‰¥,>,áº©,a,ïˆ,H,Ù¤,e,ïº‚,i,ĞŒ,K,Åª,U,ï€»,;,Äƒ,a,Ä¸,k,Ä†,C,Ä¬,I,Åˆ,n,Ä¨,I,Î™,I,Î«,Y,ïŠ,J,ï˜,X,ï½,$chr(125),ï»,$chr(123),Î,E,Ë†,^,ï–,V,ïŒ,L,Î³,y,ïº,i,Î,o,á»³,y,Ä†,C,Ä¬,I,Ä¸,k,Å¶,y,à¹›,c,á»¡,o,à¹“,m,ïº„,i,ï­,G,Å¬,U,Ä’,E,Ä‚,A,Ã·,÷,Â , ,â€š,‚,â€,„,Ë†,ˆ,â€°,‰,Äƒ,a,ï¸,x,ï€½,=,Ù‚,J,ï€¿,?,ï¿¼,-,â—Š,o,Ñ‚,T,Ä€,A,ï­‡,P,Ä–,E,Ä˜,E,Î¿,o,Ï‹,u,â€¼,!!,×˜,u,ï®’,S,Ğ§,y,Ò,r,Ä›,e,Ä˜,E,Äº,I,Î›,a,Î¿,o,Ãš,Ú,Å˜,R,Æ¯,U,Å“,œ,ï€­,-,â€”,—,à¸«,n,à¸ª,a,à¸,s,Î¨,Y,áºª,A,Ï€,n,Å…,N,Ø!,o,Ğ‹,h,á»£,o,Ä‰,c,â—¦,·,ï®,S,Å²,U,Ğ•,E,Ğ…,S,Ûµ,o,ÙŠ,S,Ø¨,u,Ø©,o,Ø¦,s,Ä¼,l,Ä±,i,Å—,r,Ğ¶,x,Î…,",Ï,w,â–ª,·,Î¶,l,Ğ©,W,à¸¿,B,á»¹,y,ÏŠ,i,Å¥,t,Ğ¿,n,Â´,´,Ú©,s,ï±¢,*,Î¾,E,Ñœ,k,âˆš,v,Ï„,t,Ã,Ğ,Â£,£,Ã±,ñ,Â¥,¥,Ã«,ë,Ã¥,å,ï™,Y,Ç,a)
  %r = $replace(%r,áº±,a,â€‚, ,ÎŸ,O,â‚ª,n,áº¬,A,ï‚£,£,ïƒ ,à,ï‚®,®,ïƒ¡,á,ï‚©,©,ïƒµ,õ,á»,o,â€, ,Ö±,¸,Ö¾,-,ï¬´,n,Åº,z,â€Œ, ,Ù,',à¹˜,c,à¸…,m,Â,,ï€¼,<,â–¼,v,ï»œ,S,â„®,e,Åº,z,áº­,a,à¹‘,a,ï¬,fi,ÑŒ,b,ïº’,.,ïºœ,:,à¸¨,a,à¸ ,n,à¹,o,à¸°,=,ï­†,y,à¸‹,i,â€¾,¯,âˆ‚,a,ï¼š,:,â‰ ,=,ï€«,+,Ù…,r,á»“,o,á»¬,U,Ğ›,N,Ó’,A,á»Œ,O,áº„,W,á»´,Y,ïºš,u,ïº¬,i,ïº,u,Å»,Z,ï®•,S,ïº³,w,ï¯½,u,ïº±,uw,ï»š,J,ïº”,a,ï€¡,!,á»…,e,Ù„,J,Ø±,j,Ù€,_,ÏŒ,o,â‚«,d,â„–,no,á»¯,u,Äš,E,Ï†,o,ï» ,I,Ñ†,u,ïƒ…,A,ïƒ‘,N,ĞŠ,H,Îˆ,E,ï¾,~,ï•,U,áº¡,a,ï€±,1,ï€´,4,ï€³,3,á»‰,i,Î•,E,Ğ,U,Ùƒ,J,â˜…,*,ï¢,b,ï€£,$chr(35),ï€¤,$,â—‹,o,Ñ,10,á»µ,y,áº,w,Ò›,k,Ù¿,u,â™‚,o,ï­Š,n,Ù¥,o,ï®,S,â¿,n,ï»—,9,ï¢,b,ï€£,$chr(35),ï€¤,$,â—‹,o,Ñ,10,á»‹,i,Î‘,A,â€€, ,ï»©,o,ï»,E,Ù†,u,áº½,e,Ø«,u,ã…“,t,Ó›,e,Ó˜,E,ï»˜,o,Û·,v,ï¬ª,w,á»¥,u,Å,O,Â,,á»±,u,ï¼ª,J,ï½…,e,ï½,a,ï¼®,N,ï¼ˆ,$chr(40),ï¼ ,@,ï½€,`,ï¼,.,â€²,',ï¼‰,$chr(41),â–¬,-,â—„,<,â–º,>,âˆ‘,E,Ö»,$chr(44),â€¬,|,â€,|,â€ª,|,â€«,|,á»˜,O,Ğ˜,N,ï—,W,ïº,z)
  %r = $replace(%r,×¡,o,â•³,X,Ù ,·,Ò’,F,Ï…,u,â€,,Ö¼,·,Ç”,u,à¸œ,w,áº°,A,áº¤,A,Â»,»,ïº–,u,á»‘,o,ï®“,S,á»Ÿ,o,ïº•,u,ï®”,S, Òœ,K,â™¦,·,â€—,_,ï»ˆ,b,à¸¬,w,ï¬°,x,ï‚­,-,à¸‚,u,à¸—,n,á»œ,O,áº¶,A,á»­,u,á»„,E,à¨¹,J, Ù‡,o,â– ,·,Æ¡,o,ï¿,,Ò£,h,Òš,K,Ò²,X,Ò³,x,Òœ,K,Ø¹,E,Ú†,c,Ñ‡,y,Ğ¥,X,Ù¦,7,Ö½,.,Ù,',Ö¿,',×ƒ,:,á»,o,Ò–,X,ÛŒ,s,à¸¬,w,âˆ™,·,Î¤,T,â“’,c,â“,a,â“Ÿ,p,â“”,e,â“£,t,Ç,A,Ğ¥,X,Ö³,.,ÛŒ,s,á»ˆ,I,Ì‰,',ïš,Z,á»,o,áº¹,e,Ò,k,ïº–,u,á»‘,o,ï®“,S,á»Ÿ,o,ïº•,u,Òš,K,ïš,Z,Ì•,',â”œ,|,â”¤,|,Ø£,I,Â‹,,×,x,áº·,a,Ç’,o,á»œ,O,â˜¼,¤,×,.,ïš,Z,à¸¤,n,â‘·,4,â‘µ,2,â’ª,0,à¹€,i,á»°,u,Ò¢,h)
  return %r
}






;/---------------------------------------\
;                MSN!Theme
;                  Menus
;
;\---------------------------------------/







menu nicklist {
  $style(2) $+ $utf8($snicks) $+ :{  }
  -
  &View Profile:{ 
    var %i = 1
    while (%i <= $numtok($snicks,44)) {
      prop $gettok($snicks,%i,44) PUID 
      inc %i
    }
  }
  -
  &Whisper:{ whois $snick(#,1) | initiatewhisper $snick(#,1) # }
  -
  &Kick
  .&Disruptive Behaviour:{ kick # $snicks Disruptive Behaviour }
  .&Profanity:{ kick # $snicks Using Profanity in the Chatroom }
  .&Scrolling:{ kick # $snicks Scrolling in the Chatroom }
  .&Other Reason:{ kick # $snicks $$?"Please enter in a reason." } 
  .&Kick:{ kick # $snicks $snicks }
  -
  &Owner:{ mode # + $+ $str(q,$numtok($snicks,44)) $replace($snicks,$chr(44),$chr(32)) }
  &Host:{ mode # + $+ $str(o,$numtok($snicks,44)) $replace($snicks,$chr(44),$chr(32)) }
  &Participant:{ 
    if ($me isowner #) {
      mode # - $+ $str(q,$numtok($snicks,44)) $replace($snicks,$chr(44),$chr(32)) 
    }
    elseif ($me isop #) {
      mode # - $+ $str(o,$numtok($snicks,44)) $replace($snicks,$chr(44),$chr(32)) 
    }
  }
  & $+ $iif($snick(#,1) isvo #,Spectator,Speaker) $+ :{ 
    var %i = 1
    var %modes
    while (%i <= $numtok($snicks,44)) {
      %modes = %modes $+ $iif($gettok($snicks,%i,44) isvo #,-,+) $+ v
      inc %i
    }
    mode # %modes $replace($snicks,$chr(44),$chr(32))
  }

}






;/---------------------------------------\
;                MSN!Theme
;                  Dialogs
;
;\---------------------------------------/






;Whisper Dialog

alias initiatewhisper {
  if ($dialog(Whisper $+ $$1)) { dialog -v Whisper $+ $$1 | halt }
  set -u1 %newwhisper $$1
  set -u1 %newwhisperchan $$2
  dialog -md Whisper $+ $$1 Whisper
}

on *:dialog:Whisper*:init:0:{
  if ($dname == Whisper $+ %newwhisper) {
    dialog -t $dname $utf8($remove($dname,Whisper))
    did -a $dname 6 To: $utf8($ial($remove($dname,Whisper))) $lf $+ Chan: %newwhisperchan
    did -a $dname 8 %newwhisperchan
  }
}

on *:dialog:Whisper*:edit:5:{
  if ($did($dname,5).text == $null) && ($gettok($did($dname,2).text,2,32) != $shortfn($mircdirAntiWhisper.png)) { did -g $dname 2 0 $shortfn($mircdirAntiWhisper.png) }
  elseif ($did($dname,5).text != $null) && ($gettok($did($dname,2).text,2,32) != $shortfn($mircdirWhisper.png)) { did -g $dname 2 0 $shortfn($mircdirWhisper.png) }
}

on *:dialog:Whisper*:edit:1:{
  echo -s $numtok($did($dname,5).text,255)
}

on *:dialog:Whisper*:sclick:7:{
  if ($did($dname,5).text != $null) {
    .raw whisper $did($dname,8).text $remove($dname,Whisper) : $+ $did($dname,5).text
    did -a $dname 1 $utf8($me) : $did($dname,5).text $+   $+ $crlf
    did -r $dname 5
    did -g $dname 2 0 $shortfn($mircdirAntiWhisper.png) 
  }
}

on *:dialog:Whisper*:sclick:2:{
  if ($did($dname,5).text != $null) {
    .raw whisper $did($dname,8).text $remove($dname,Whisper) : $+ $did($dname,5).text
    did -a $dname 1 $utf8($me) : $did($dname,5).text $+   $+ $crlf
    did -r $dname 5
    did -g $dname 2 0 $shortfn($mircdirAntiWhisper.png)
  }
}

dialog Whisper {
  title ""
  size -1 -1 193 113
  option dbu
  icon $mircdirIcon_1.ico, 0
  edit "", 5, 5 97 139 11, autohs
  edit "", 1, 2 18 190 72, multi autovs vsbar
  icon 2, 146 96 45 13,  $mircdirAntiWhisper.png, 0
  box "", 4, 1 90 191 22
  text "To:", 6, 3 2 188 15
  button "", 7, 5000 5000 1 1, default
  text "", 8, 5000 5000 1 1
}

#MSNThemeV2 end
